<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>MVC - Model</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark-href {
	font-size: 0.75em;
	opacity: 0.5;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif; }
.mono { font-family: Nitti, 'Microsoft YaHei', '微软雅黑', monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, KaiTi, STKaiTi, '华文楷体', KaiTi_GB2312, '楷体_GB2312', serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, Nitti, 'Microsoft YaHei', '微软雅黑', monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="cd6ef657-055f-4f8e-9c92-661d9ff7f518" class="page sans"><header><h1 class="page-title">MVC - Model</h1></header><div class="page-body"><p id="91a552e4-9921-4001-be91-a7e5a1d62444" class="">MVC (Model, View, Controller) adalah sebuah pola desain (design pattern) arsitektur pengembangan aplikasi yang memisahkan dan mengelompokan beberapa kode sesuai degan fungsinya.</p><h3 id="cb8aadec-6cc1-4eb1-8d5b-dd468d927646" class="">MVC membagi aplikasi ke dalam tiga bagian fungsional:
{model, view, dan controller}</h3><ul id="89624ddc-d3d0-458e-a9b5-0ef37996970e" class="bulleted-list"><li><strong>Model</strong> adalah kode-kode untuk model bisnis dan data. biasanya berhubungan langsung dengan database untuk memanipulasi data (insert, update, delete, search), menangani validasi dari bagian controller, namun tidak dapat berhubungan langsung dengan bagian view.</li></ul><ul id="86f9683e-1f2d-4171-b49c-2a86b890d8b8" class="bulleted-list"><li><strong>View</strong> merupakan bagian yang menangani <em>presentation logic</em>. berisi kode-kode untuk tampilan.</li></ul><ul id="bf1943c9-b7c2-46c7-8acc-ffef661e9825" class="bulleted-list"><li><strong>Controller</strong> merupakan bagian yang mengatur hubungan antara bagian <em>model</em> dan bagian <em>view</em>, controller berfungsi untuk menerima request dan data dari user kemudian menentukan apa yang akan diproses oleh aplikasi.<figure id="5702d757-48b3-4fbb-8922-ddddd4421b4f" class="image"><a href="https://d33wubrfki0l68.cloudfront.net/1ab99e1d5fc83a8175547a22f3363a9574df53b9/b0288/img/ci/mvc/mvc.png"><img src="https://d33wubrfki0l68.cloudfront.net/1ab99e1d5fc83a8175547a22f3363a9574df53b9/b0288/img/ci/mvc/mvc.png"/></a></figure></li></ul><h3 id="a2f10187-e962-41e7-95d0-9b518ec28560" class="">Alur kerjanya seperti ini:</h3><ol id="cd0b195e-a1ad-424e-bdfb-313429dd8807" class="numbered-list" start="1"><li>Mulai;</li></ol><ol id="72da7085-0069-4f98-b1f2-7636651d59bf" class="numbered-list" start="2"><li>User mengirim <em>request</em> ke web;</li></ol><ol id="400e10f6-e6ed-4e3b-8bb5-f5dee0afd416" class="numbered-list" start="3"><li>File yang pertama kali dieksekusi adalah <code>index.js</code>;</li></ol><ol id="dcf7a773-acd8-4e67-af5b-99bd382b4f96" class="numbered-list" start="4"><li>Lalu dari <code>index.js</code>, <em>request</em> akan diteruskan oleh <code>routers.js</code>;</li></ol><ol id="8db56408-306d-41a7-a3aa-c1e3b7019e8f" class="numbered-list" start="5"><li><code>routers.js</code> akan mencari <em>cache</em> di server, apabila tedapat <em>cache</em> maka <em>cache</em> itu yang akan dikirim sebagai balasan <em>(response)</em>. Apabila tidak ada <em>cache</em> barulah <em>request</em> diteruskan ke <em>Controller</em>;</li></ol><ol id="62e310f2-0c54-422e-b8d0-bc0bceb30aca" class="numbered-list" start="6"><li><em>Controller</em> akan bertanggung jawab untuk mengambil data dari <em>Model</em> dan me-rendernya ke dalam <em>View</em> dengan menggunakan <em>library</em>, <em>plugin</em>, dan <em>helper</em> yang ada.</li></ol><ol id="0d2ea86c-d95c-42b7-9acd-a3f6bcef1e46" class="numbered-list" start="7"><li>Hasil <em>render</em> <em>(view)</em> dikirim ke pengguna dan disimpan dalam <em>cache</em>, apabila fitur <em>cache</em> aktif;</li></ol><ol id="864bee51-b5db-497c-9f3f-65f10ec5dc2d" class="numbered-list" start="8"><li>Selesai.<figure id="bc717788-acf0-4355-9c77-6a33cc45dd33" class="image"><a href="https://d33wubrfki0l68.cloudfront.net/37edf49ad28e56fbb56edcc84cd9f283e99971b9/28c9c/img/ci/mvc/appflowchart.gif"><img src="https://d33wubrfki0l68.cloudfront.net/37edf49ad28e56fbb56edcc84cd9f283e99971b9/28c9c/img/ci/mvc/appflowchart.gif"/></a></figure></li></ol><h3 id="b2270c09-bed0-43b4-8ae7-b13846cefc55" class="">Kali ini kita akan belajar membuat model pada project node kita.</h3><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="97a4fdfa-9a21-4fe1-996a-0cd87a77056d"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%"><strong>Model</strong> adalah kode-kode untuk model bisnis dan data. biasanya berhubungan langsung dengan database untuk memanipulasi data (insert, update, delete, search), menangani validasi dari bagian controller, namun tidak dapat berhubungan langsung dengan bagian view.</div></figure><ul id="4c15a4e7-1ee2-4b17-af97-913c51d44818" class="bulleted-list"><li>Berikut contoh pembuatan model pada dengan nama file contactModel.js:<pre id="dfeb3255-df36-4c3c-a2ae-beadba3a01ff" class="code"><code>// contactModel.js
var mongoose = require(&#x27;mongoose&#x27;);
// Setup schema
var contactSchema = mongoose.Schema({
  name: {
      type: String,
      required: true
  },
  email: {
      type: String,
      required: true
  },
  gender: String,
  phone: String,
  create_date: {
      type: Date,
      default: Date.now
  }
});
// Export Contact model
var Contact = module.exports = mongoose.model(&#x27;contact&#x27;, contactSchema);
module.exports.get = function (callback, limit) {
  Contact.find(callback).limit(limit);
}</code></pre></li></ul><ul id="969e1090-7c7c-4a1d-8e5a-1c6847c9ce4b" class="bulleted-list"><li>Tambahkan Contact router pada api-routes.js:<pre id="8f106d6e-f0a7-4a8c-a065-c70696d3c882" class="code"><code>// api-routes.js
// Initialize express router
let router = require(&#x27;express&#x27;).Router();
// Set default API response
router.get(&#x27;/&#x27;, function (req, res) {
  res.json({
      status: &#x27;API Its Working&#x27;,
      message: &#x27;Welcome to RESTHub crafted with love!&#x27;,
  });
});
<mark class="highlight-yellow_background">// Import contact controller
var contactController = require(&#x27;./contactController&#x27;);
// Contact routes
router.route(&#x27;/contacts&#x27;)
  .get(contactController.index)
  .post(contactController.new);
router.route(&#x27;/contacts/:contact_id&#x27;)
  .get(contactController.view)
  .patch(contactController.update)
  .put(contactController.update)
  .delete(contactController.delete);</mark>
// Export API routes
module.exports = router;</code></pre></li></ul><ul id="6b7c8da3-5217-4ea2-b5bc-26b63cd67d40" class="bulleted-list"><li>Buka terminal/CMD kemudian jalankan project kita dengan nodemon, contoh:<pre id="60a8ca69-7dc6-48a2-88e0-08cb1fa78358" class="code"><code>PS C:\Users\AndikaAndriana\Documents\1-repo-belajar\nodeJS\nodeProjects\resthub&gt; nodemon index
[nodemon] 2.0.2
[nodemon] to restart at any time, enter `rs`
[nodemon] watching dir(s): *.*
[nodemon] watching extensions: js,mjs,json
[nodemon] starting `node index index.js`
(node:27508) DeprecationWarning: current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect.
(node:27508) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.
Running resthub on port: 8080</code></pre></li></ul><ul id="96d8e071-1a9d-4a8a-91fa-7cedb3dc0a77" class="bulleted-list"><li>Kemudian buka browser lalu tujukan address ke localhost:8080/api/contacts<figure id="5c808d2b-866a-4c49-a463-4ad9ba1a6c46" class="image"><a href="MVC%20Model/Untitled.png"><img style="width:770px" src="MVC%20Model/Untitled.png"/></a></figure><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="3342b96d-1f38-4621-bb3d-0f30d7a2f6b7"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">Maka akan tampil pesan berformat json yang dikirimkan dari function <code>Handle index actions</code> pada file contactController.js</div></figure></li></ul></div></article></body></html>